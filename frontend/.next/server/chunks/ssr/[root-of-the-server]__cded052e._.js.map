{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///F:/Instech/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["'use client';\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport default function ProtectedRoute({ children, adminOnly = false }) {\r\n  const { user, loading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      // console.log('i am user',user)\r\n  // console.log('i am user',user.role)\r\n  // console.log('i am user',adminOnly)\r\n      if (!user) {\r\n        router.push('/login');\r\n      } else if (adminOnly && user?.user?.role != 'admin') {\r\n        router.push('/dashboard');\r\n      }\r\n    }\r\n  }, [user, loading, adminOnly, router]);\r\n\r\n  if (loading || !user) {\r\n    return <p className=\"text-center p-4\">Loading...</p>;\r\n  }\r\n\r\n  return children;\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,KAAK,EAAE;IACpE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,6HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS;YACZ,gCAAgC;YACpC,qCAAqC;YACrC,qCAAqC;YACjC,IAAI,CAAC,MAAM;gBACT,OAAO,IAAI,CAAC;YACd,OAAO,IAAI,aAAa,MAAM,MAAM,QAAQ,SAAS;gBACnD,OAAO,IAAI,CAAC;YACd;QACF;IACF,GAAG;QAAC;QAAM;QAAS;QAAW;KAAO;IAErC,IAAI,WAAW,CAAC,MAAM;QACpB,qBAAO,8OAAC;YAAE,WAAU;sBAAkB;;;;;;IACxC;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///F:/Instech/frontend/src/app/dashboard/attendance/page.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport ProtectedRoute from '../../../components/ProtectedRoute';\r\nimport Link from 'next/link';\r\n\r\nconst AttendancePage = () => {\r\n  const [attendance, setAttendance] = useState([]);\r\n  const [todayStatus, setTodayStatus] = useState(null);\r\n\r\n  const fetchAttendance = async () => {\r\n    const res = await axios.get(`${process.env.NEXT_PUBLIC_API_URL}/attendance/me`, {\r\n  withCredentials: true\r\n});\r\nconsole.log('res.data',res.data)\r\nconsole.log('res.data.records',res.data.records)\r\n    setAttendance(res.data);\r\n    setTodayStatus(res.data.today); // { status: \"Present\" | \"Leave\" | null, checkIn, checkOut }\r\n  };\r\n\r\n  const checkIn = async () => {\r\n    await axios.post(`${process.env.NEXT_PUBLIC_API_URL}/attendance/check-in`,{}, {\r\n        withCredentials: true\r\n      });\r\n    fetchAttendance();\r\n  };\r\n\r\n  const checkOut = async () => {\r\n    await axios.post(`${process.env.NEXT_PUBLIC_API_URL}/attendance/check-out`,{}, {\r\n        withCredentials: true\r\n      });\r\n    fetchAttendance();\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchAttendance();\r\n  }, []);\r\n\r\n  return (\r\n    <ProtectedRoute>\r\n      <div className=\"p-6\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Attendance</h2>\r\n\r\n        <div className=\"mb-6 border p-4 bg-gray-50\">\r\n          <p className=\"mb-2\">Today's Status: <strong>{todayStatus?.status || 'Not Marked'}</strong></p>\r\n          <div className=\"space-x-4 flex justify-between\">\r\n            {!todayStatus?.checkIn && (\r\n              <button onClick={checkIn} className=\"px-4 py-2 bg-green-600 text-white rounded\">Check In</button>\r\n            )}\r\n            {todayStatus?.checkIn && !todayStatus?.checkOut && (\r\n              <button onClick={checkOut} className=\"px-4 py-2 bg-yellow-500 text-white rounded\">Check Out</button>\r\n            )}\r\n<Link href=\"/dashboard/attendance/leave\" className=\"text-blue-500 underline\">Apply for Leave</Link>\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <h3 className=\"text-lg font-medium mb-2\">Your Attendance Records</h3>\r\n        <table className=\"w-full bg-white text-sm\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"py-2\">Date</th>\r\n              <th className=\"py-2\">Status</th>\r\n              <th className=\"py-2\">Check In</th>\r\n              <th className=\"py-2\">Check Out</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {attendance?.map((a) => (\r\n              <tr key={a._id}>\r\n                <td className=\"text-center py-1\">{new Date(a.date).toLocaleDateString()}</td>\r\n                <td className=\"text-center py-1\">{a.status}</td>\r\n                <td className=\"text-center py-1\">{a.checkIn ? a.checkIn : '--'}</td>\r\n                <td className=\"text-center py-1\">{a.checkOut ? new Date(a.checkOut).toLocaleTimeString() : '--'}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </ProtectedRoute>\r\n  );\r\n};\r\n\r\nexport default AttendancePage;\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,iBAAiB;IACrB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,MAAM,kBAAkB;QACtB,MAAM,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,iEAAmC,cAAc,CAAC,EAAE;YAClF,iBAAiB;QACnB;QACA,QAAQ,GAAG,CAAC,YAAW,IAAI,IAAI;QAC/B,QAAQ,GAAG,CAAC,oBAAmB,IAAI,IAAI,CAAC,OAAO;QAC3C,cAAc,IAAI,IAAI;QACtB,eAAe,IAAI,IAAI,CAAC,KAAK,GAAG,4DAA4D;IAC9F;IAEA,MAAM,UAAU;QACd,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,iEAAmC,oBAAoB,CAAC,EAAC,CAAC,GAAG;YAC1E,iBAAiB;QACnB;QACF;IACF;IAEA,MAAM,WAAW;QACf,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,iEAAmC,qBAAqB,CAAC,EAAC,CAAC,GAAG;YAC3E,iBAAiB;QACnB;QACF;IACF;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC,mIAAA,CAAA,UAAc;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAA6B;;;;;;8BAE3C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;;gCAAO;8CAAgB,8OAAC;8CAAQ,aAAa,UAAU;;;;;;;;;;;;sCACpE,8OAAC;4BAAI,WAAU;;gCACZ,CAAC,aAAa,yBACb,8OAAC;oCAAO,SAAS;oCAAS,WAAU;8CAA4C;;;;;;gCAEjF,aAAa,WAAW,CAAC,aAAa,0BACrC,8OAAC;oCAAO,SAAS;oCAAU,WAAU;8CAA6C;;;;;;8CAEhG,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;oCAA8B,WAAU;8CAA0B;;;;;;;;;;;;;;;;;;8BAKrE,8OAAC;oBAAG,WAAU;8BAA2B;;;;;;8BACzC,8OAAC;oBAAM,WAAU;;sCACf,8OAAC;sCACC,cAAA,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAO;;;;;;kDACrB,8OAAC;wCAAG,WAAU;kDAAO;;;;;;kDACrB,8OAAC;wCAAG,WAAU;kDAAO;;;;;;kDACrB,8OAAC;wCAAG,WAAU;kDAAO;;;;;;;;;;;;;;;;;sCAGzB,8OAAC;sCACE,YAAY,IAAI,CAAC,kBAChB,8OAAC;;sDACC,8OAAC;4CAAG,WAAU;sDAAoB,IAAI,KAAK,EAAE,IAAI,EAAE,kBAAkB;;;;;;sDACrE,8OAAC;4CAAG,WAAU;sDAAoB,EAAE,MAAM;;;;;;sDAC1C,8OAAC;4CAAG,WAAU;sDAAoB,EAAE,OAAO,GAAG,EAAE,OAAO,GAAG;;;;;;sDAC1D,8OAAC;4CAAG,WAAU;sDAAoB,EAAE,QAAQ,GAAG,IAAI,KAAK,EAAE,QAAQ,EAAE,kBAAkB,KAAK;;;;;;;mCAJpF,EAAE,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;AAY5B;uCAEe","debugId":null}}]
}