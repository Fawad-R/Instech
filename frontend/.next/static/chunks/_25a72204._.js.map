{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///F:/Instech/frontend/src/components/ProtectedRoute.js"],"sourcesContent":["'use client';\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nexport default function ProtectedRoute({ children, adminOnly = false }) {\r\n  const { user, loading } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    if (!loading) {\r\n      console.log('i am user',user)\r\n  console.log('i am user',user.role)\r\n  console.log('i am user',adminOnly)\r\n      if (!user) {\r\n        router.push('/login');\r\n      } else if (adminOnly && user?.user?.role != 'admin') {\r\n        router.push('/dashboard');\r\n      }\r\n    }\r\n  }, [user, loading, adminOnly, router]);\r\n\r\n  if (loading || !user) {\r\n    return <p className=\"text-center p-4\">Loading...</p>;\r\n  }\r\n\r\n  return children;\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;AAHA;;;;AAKe,SAAS,eAAe,EAAE,QAAQ,EAAE,YAAY,KAAK,EAAE;;IACpE,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,UAAO,AAAD;IAChC,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,IAAI,CAAC,SAAS;gBACZ,QAAQ,GAAG,CAAC,aAAY;gBAC5B,QAAQ,GAAG,CAAC,aAAY,KAAK,IAAI;gBACjC,QAAQ,GAAG,CAAC,aAAY;gBACpB,IAAI,CAAC,MAAM;oBACT,OAAO,IAAI,CAAC;gBACd,OAAO,IAAI,aAAa,MAAM,MAAM,QAAQ,SAAS;oBACnD,OAAO,IAAI,CAAC;gBACd;YACF;QACF;mCAAG;QAAC;QAAM;QAAS;QAAW;KAAO;IAErC,IAAI,WAAW,CAAC,MAAM;QACpB,qBAAO,6LAAC;YAAE,WAAU;sBAAkB;;;;;;IACxC;IAEA,OAAO;AACT;GAtBwB;;QACI,gIAAA,CAAA,UAAO;QAClB,qIAAA,CAAA,YAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///F:/Instech/frontend/src/app/dashboard/payroll/page.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport ProtectedRoute from '@/components/ProtectedRoute';\r\n\r\nexport default function PayrollPage() {\r\n  const [payroll, setPayroll] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [month, setMonth] = useState(new Date().getMonth() + 1); // 1-12\r\n  const [year, setYear] = useState(new Date().getFullYear());\r\n\r\n  const fetchPayroll = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('token');\r\n\r\n      const res = await axios.post(\r\n        `${process.env.NEXT_PUBLIC_API_URL}/payroll/generate`,\r\n        {\r\n          employeeId: 'me', // or actual employee ID if admin view\r\n          month,\r\n          year,\r\n        },\r\n        {\r\n          withCredentials: true\r\n        }\r\n      );\r\n\r\n      setPayroll(res.data);\r\n    } catch (err) {\r\n      console.error('Failed to fetch payroll:', err);\r\n      setPayroll(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPayroll();\r\n  }, [month, year]);\r\n\r\n  return (\r\n<ProtectedRoute>\r\n    \r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">My Payroll</h1>\r\n\r\n      <div className=\"flex gap-4 mb-6\">\r\n        <select value={month} onChange={(e) => setMonth(Number(e.target.value))} className=\"p-2 border rounded\">\r\n          {[...Array(5)].map((_, i) => (\r\n            <option key={i + 1} value={i + 1}>{new Date(0, i).toLocaleString('default', { month: 'long' })}</option>\r\n          ))}\r\n        </select>\r\n        <select value={year} onChange={(e) => setYear(Number(e.target.value))} className=\"p-2 border rounded\">\r\n          {[ 2025].map((y) => (\r\n            <option key={y} value={y}>{y}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {loading && <p>Loading payroll...</p>}\r\n\r\n      {payroll && (\r\n        <div>\r\n          <div className=\"mb-4\">\r\n            <p><strong>Employee:</strong> {payroll.employee}</p>\r\n            <p><strong>Designation:</strong> {payroll.designation}</p>\r\n            <p><strong>Total Working Days:</strong> {payroll.totalDays}</p>\r\n            <p><strong>Present:</strong> {payroll.present}</p>\r\n            <p><strong>Leave:</strong> {payroll.leave}</p>\r\n            <p><strong>Absent:</strong> {payroll.absent}</p>\r\n            <p><strong>Total Salary:</strong> â‚¹{payroll?.totalSalary?.toFixed(2)}</p>\r\n          </div>\r\n\r\n          <h2 className=\"text-lg font-semibold mb-2\">Daily Breakdown</h2>\r\n          <table className=\"w-full border\">\r\n            <thead>\r\n              <tr className=\"bg-gray-100\">\r\n                <th className=\"border p-2\">Date</th>\r\n                <th className=\"border p-2\">Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {payroll.detailedRecords.map((rec, index) => (\r\n                <tr key={index}>\r\n                  <td className=\"border p-2\">{rec.date}</td>\r\n                  <td className=\"border p-2\">\r\n                    <span className={\r\n                      rec.status === 'Present' ? 'text-green-600' :\r\n                        rec.status === 'Leave' ? 'text-yellow-600' :\r\n                          'text-red-600'\r\n                    }>\r\n                      {rec.status}\r\n                    </span>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n    </div>\r\n    </ProtectedRoute>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":["file:///F:/Instech/frontend/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}