{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///F:/Instech/frontend/src/app/admin/approvals/page.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ApprovalsPage = () => {\r\n  const [pendingUsers, setPendingUsers] = useState([]);\r\n  const [formData, setFormData] = useState({});\r\n\r\n  useEffect(() => {\r\n    const fetchPendingUsers = async () => {\r\n      const res = await axios.get(`${process.env.NEXT_PUBLIC_API_URL}/admin/pending`, {\r\n        withCredentials: true\r\n      });\r\n      setPendingUsers(res.data);\r\n    };\r\n    fetchPendingUsers();\r\n  }, []);\r\n\r\n  const handleChange = (userId, field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [userId]: {\r\n        ...prev[userId],\r\n        [field]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  const approveUser = async (userId) => {\r\n    const userData = formData[userId];\r\n    if (!userData?.designation || !userData?.salary) {\r\n      alert('Please enter designation and salary before approving.');\r\n      return;\r\n    }\r\n\r\n    await axios.put(\r\n      `${process.env.NEXT_PUBLIC_API_URL}/admin/approve`,\r\n      {\r\n        userId,\r\n        designation: userData.designation,\r\n        salary: userData.salary,\r\n      },\r\n      { withCredentials: true }\r\n    );\r\n\r\n    setPendingUsers(pendingUsers.filter((user) => user._id !== userId));\r\n    const updatedFormData = { ...formData };\r\n    delete updatedFormData[userId];\r\n    setFormData(updatedFormData);\r\n  };\r\n\r\n  return (\r\n    <ProtectedRoute adminOnly={true}>\r\n    \r\n    <div className=\"p-4\">\r\n      <h1 className=\"text-xl font-bold mb-4\">Pending Approvals</h1>\r\n      <ul className=\"space-y-4\">\r\n        {pendingUsers.map((user) => (\r\n          <li key={user._id} className=\"border p-4 rounded\">\r\n            <p className=\"font-semibold\">{user.name} - {user.email}</p>\r\n            <div className=\"mt-2 space-y-2\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Designation\"\r\n                className=\"border p-2 w-full\"\r\n                value={formData[user._id]?.designation || ''}\r\n                onChange={(e) => handleChange(user._id, 'designation', e.target.value)}\r\n              />\r\n              <input\r\n                type=\"number\"\r\n                placeholder=\"Fixed Monthly Salary\"\r\n                className=\"border p-2 w-full\"\r\n                value={formData[user._id]?.salary || ''}\r\n                onChange={(e) => handleChange(user._id, 'salary', e.target.value)}\r\n              />\r\n              <button\r\n                onClick={() => approveUser(user._id)}\r\n                className=\"bg-green-500 text-white px-4 py-2 rounded\"\r\n              >\r\n                Approve\r\n              </button>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n    </ProtectedRoute>\r\n  );\r\n};\r\n\r\nexport default ApprovalsPage;\r\n"],"names":[],"mappings":";;;AAWqC;;AATrC;AACA;;;AAHA;;;AAKA,MAAM,gBAAgB;;IACpB,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,CAAC;IAE1C,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,MAAM;6DAAoB;oBACxB,MAAM,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,iEAAmC,cAAc,CAAC,EAAE;wBAC9E,iBAAiB;oBACnB;oBACA,gBAAgB,IAAI,IAAI;gBAC1B;;YACA;QACF;kCAAG,EAAE;IAEL,MAAM,eAAe,CAAC,QAAQ,OAAO;QACnC,YAAY,CAAA,OAAQ,CAAC;gBACnB,GAAG,IAAI;gBACP,CAAC,OAAO,EAAE;oBACR,GAAG,IAAI,CAAC,OAAO;oBACf,CAAC,MAAM,EAAE;gBACX;YACF,CAAC;IACH;IAEA,MAAM,cAAc,OAAO;QACzB,MAAM,WAAW,QAAQ,CAAC,OAAO;QACjC,IAAI,CAAC,UAAU,eAAe,CAAC,UAAU,QAAQ;YAC/C,MAAM;YACN;QACF;QAEA,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CACb,iEAAmC,cAAc,CAAC,EAClD;YACE;YACA,aAAa,SAAS,WAAW;YACjC,QAAQ,SAAS,MAAM;QACzB,GACA;YAAE,iBAAiB;QAAK;QAG1B,gBAAgB,aAAa,MAAM,CAAC,CAAC,OAAS,KAAK,GAAG,KAAK;QAC3D,MAAM,kBAAkB;YAAE,GAAG,QAAQ;QAAC;QACtC,OAAO,eAAe,CAAC,OAAO;QAC9B,YAAY;IACd;IAEA,qBACE,6LAAC;QAAe,WAAW;kBAE3B,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAG,WAAU;8BAAyB;;;;;;8BACvC,6LAAC;oBAAG,WAAU;8BACX,aAAa,GAAG,CAAC,CAAC,qBACjB,6LAAC;4BAAkB,WAAU;;8CAC3B,6LAAC;oCAAE,WAAU;;wCAAiB,KAAK,IAAI;wCAAC;wCAAI,KAAK,KAAK;;;;;;;8CACtD,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,WAAU;4CACV,OAAO,QAAQ,CAAC,KAAK,GAAG,CAAC,EAAE,eAAe;4CAC1C,UAAU,CAAC,IAAM,aAAa,KAAK,GAAG,EAAE,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;sDAEvE,6LAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,WAAU;4CACV,OAAO,QAAQ,CAAC,KAAK,GAAG,CAAC,EAAE,UAAU;4CACrC,UAAU,CAAC,IAAM,aAAa,KAAK,GAAG,EAAE,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;sDAElE,6LAAC;4CACC,SAAS,IAAM,YAAY,KAAK,GAAG;4CACnC,WAAU;sDACX;;;;;;;;;;;;;2BApBI,KAAK,GAAG;;;;;;;;;;;;;;;;;;;;;AA8B3B;GApFM;KAAA;uCAsFS","debugId":null}}]
}